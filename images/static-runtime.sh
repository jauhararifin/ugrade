#!/bin/bash

rm -rf tempfs
mkdir tempfs

docker export $(docker create frolvlad/alpine-gxx) | tar -C tempfs -xf -

rm -rf "tempfs/.dockerenv"
rm -rf "tempfs/proc"
rm -rf "tempfs/lib/apk"
rm -rf "tempfs/lib/mdev"
rm -rf "tempfs/lib/firmware"
rm -rf "tempfs/usr/lib/engines-1.1"
rm -rf "tempfs/usr/lib/gcc"
rm -rf "tempfs/usr/include/c++/8.3.0"
rm -rf "tempfs/usr/include/c++/8.2.0"
rm -rf "tempfs/usr/x86_64-alpine-linux-musl"
rm -rf "tempfs/usr/share"
rm -rf "tempfs/usr/libexec"
rm -rf "tempfs/usr/bin"
rm -rf "tempfs/usr/local"
rm -rf "tempfs/usr/sbin"
rm -rf "tempfs/dev"
rm -rf "tempfs/srv"
rm -rf "tempfs/root"
rm -rf "tempfs/opt"
rm -rf "tempfs/media"
rm -rf "tempfs/run"
rm -rf "tempfs/sys"
rm -rf "tempfs/home"
rm -rf "tempfs/tmp"
rm -rf "tempfs/bin/logname"
rm -rf "tempfs/bin/sum"
rm -rf "tempfs/bin/ifplugd"
rm -rf "tempfs/bin/split"
rm -rf "tempfs/bin/ipcs"
rm -rf "tempfs/bin/ip"
rm -rf "tempfs/bin/slattach"
rm -rf "tempfs/bin/shred"
rm -rf "tempfs/bin/ps"
rm -rf "tempfs/bin/stty"
rm -rf "tempfs/bin/microcom"
rm -rf "tempfs/bin/fbset"
rm -rf "tempfs/bin/envdir"
rm -rf "tempfs/bin/nslookup"
rm -rf "tempfs/bin/hd"
rm -rf "tempfs/bin/chmod"
rm -rf "tempfs/bin/dumpleases"
rm -rf "tempfs/bin/fdformat"
rm -rf "tempfs/bin/uname"
rm -rf "tempfs/bin/true"
rm -rf "tempfs/bin/chroot"
rm -rf "tempfs/bin/wc"
rm -rf "tempfs/bin/adduser"
rm -rf "tempfs/bin/unix2dos"
rm -rf "tempfs/bin/sha256sum"
rm -rf "tempfs/bin/depmod"
rm -rf "tempfs/bin/factor"
rm -rf "tempfs/bin/[["
rm -rf "tempfs/bin/fdisk"
rm -rf "tempfs/bin/test"
rm -rf "tempfs/bin/pscan"
rm -rf "tempfs/bin/netstat"
rm -rf "tempfs/bin/patch"
rm -rf "tempfs/bin/scriptreplay"
rm -rf "tempfs/bin/devmem"
rm -rf "tempfs/bin/tftpd"
rm -rf "tempfs/bin/cttyhack"
rm -rf "tempfs/bin/watchdog"
rm -rf "tempfs/bin/ubiattach"
rm -rf "tempfs/bin/ifconfig"
rm -rf "tempfs/bin/sulogin"
rm -rf "tempfs/bin/w"
rm -rf "tempfs/bin/i2cset"
rm -rf "tempfs/bin/expr"
rm -rf "tempfs/bin/uptime"
rm -rf "tempfs/bin/ubidetach"
rm -rf "tempfs/bin/kill"
rm -rf "tempfs/bin/sync"
rm -rf "tempfs/bin/["
rm -rf "tempfs/bin/logger"
rm -rf "tempfs/bin/klogd"
rm -rf "tempfs/bin/man"
rm -rf "tempfs/bin/mkswap"
rm -rf "tempfs/bin/arch"
rm -rf "tempfs/bin/tee"
rm -rf "tempfs/bin/mpstat"
rm -rf "tempfs/bin/ifdown"
rm -rf "tempfs/bin/kbd_mode"
rm -rf "tempfs/bin/getty"
rm -rf "tempfs/bin/ash"
rm -rf "tempfs/bin/switch_root"
rm -rf "tempfs/bin/blkid"
rm -rf "tempfs/bin/shuf"
rm -rf "tempfs/bin/cmp"
rm -rf "tempfs/bin/setlogcons"
rm -rf "tempfs/bin/syslogd"
rm -rf "tempfs/bin/vconfig"
rm -rf "tempfs/bin/addgroup"
rm -rf "tempfs/bin/hwclock"
rm -rf "tempfs/bin/whoami"
rm -rf "tempfs/bin/mknod"
rm -rf "tempfs/bin/blkdiscard"
rm -rf "tempfs/bin/last"
rm -rf "tempfs/bin/fbsplash"
rm -rf "tempfs/bin/cut"
rm -rf "tempfs/bin/login"
rm -rf "tempfs/bin/whois"
rm -rf "tempfs/bin/fsfreeze"
rm -rf "tempfs/bin/runlevel"
rm -rf "tempfs/bin/dpkg"
rm -rf "tempfs/bin/arping"
rm -rf "tempfs/bin/lzma"
rm -rf "tempfs/bin/zcip"
rm -rf "tempfs/bin/users"
rm -rf "tempfs/bin/rpm2cpio"
rm -rf "tempfs/bin/dhcprelay"
rm -rf "tempfs/bin/chown"
rm -rf "tempfs/bin/hostname"
rm -rf "tempfs/bin/hostid"
rm -rf "tempfs/bin/setarch"
rm -rf "tempfs/bin/ifenslave"
rm -rf "tempfs/bin/du"
rm -rf "tempfs/bin/insmod"
rm -rf "tempfs/bin/sendmail"
rm -rf "tempfs/bin/acpid"
rm -rf "tempfs/bin/readprofile"
rm -rf "tempfs/bin/readahead"
rm -rf "tempfs/bin/nl"
rm -rf "tempfs/bin/pidof"
rm -rf "tempfs/bin/printf"
rm -rf "tempfs/bin/umount"
rm -rf "tempfs/bin/printenv"
rm -rf "tempfs/bin/blockdev"
rm -rf "tempfs/bin/chat"
rm -rf "tempfs/bin/false"
rm -rf "tempfs/bin/mkdir"
rm -rf "tempfs/bin/unxz"
rm -rf "tempfs/bin/base64"
rm -rf "tempfs/bin/ping6"
rm -rf "tempfs/bin/remove-shell"
rm -rf "tempfs/bin/ubirsvol"
rm -rf "tempfs/bin/uniq"
rm -rf "tempfs/bin/killall"
rm -rf "tempfs/bin/wall"
rm -rf "tempfs/bin/fsck"
rm -rf "tempfs/bin/lzop"
rm -rf "tempfs/bin/deluser"
rm -rf "tempfs/bin/mountpoint"
rm -rf "tempfs/bin/mkfifo"
rm -rf "tempfs/bin/killall5"
rm -rf "tempfs/bin/chrt"
rm -rf "tempfs/bin/resume"
rm -rf "tempfs/bin/nc"
rm -rf "tempfs/bin/timeout"
rm -rf "tempfs/bin/truncate"
rm -rf "tempfs/bin/watch"
rm -rf "tempfs/bin/fold"
rm -rf "tempfs/bin/df"
rm -rf "tempfs/bin/init"
rm -rf "tempfs/bin/dc"
rm -rf "tempfs/bin/rpm"
rm -rf "tempfs/bin/paste"
rm -rf "tempfs/bin/modprobe"
rm -rf "tempfs/bin/nbd-client"
rm -rf "tempfs/bin/tunctl"
rm -rf "tempfs/bin/ftpput"
rm -rf "tempfs/bin/cksum"
rm -rf "tempfs/bin/raidautorun"
rm -rf "tempfs/bin/linux32"
rm -rf "tempfs/bin/rmdir"
rm -rf "tempfs/bin/diff"
rm -rf "tempfs/bin/fakeidentd"
rm -rf "tempfs/bin/iprule"
rm -rf "tempfs/bin/ipcrm"
rm -rf "tempfs/bin/top"
rm -rf "tempfs/bin/dos2unix"
rm -rf "tempfs/bin/touch"
rm -rf "tempfs/bin/pgrep"
rm -rf "tempfs/bin/dmesg"
rm -rf "tempfs/bin/i2cdetect"
rm -rf "tempfs/bin/unzip"
rm -rf "tempfs/bin/nandwrite"
rm -rf "tempfs/bin/ttysize"
rm -rf "tempfs/bin/run-init"
rm -rf "tempfs/bin/ntpd"
rm -rf "tempfs/bin/ionice"
rm -rf "tempfs/bin/ls"
rm -rf "tempfs/bin/halt"
rm -rf "tempfs/bin/ubiupdatevol"
rm -rf "tempfs/bin/taskset"
rm -rf "tempfs/bin/sed"
rm -rf "tempfs/bin/xxd"
rm -rf "tempfs/bin/mv"
rm -rf "tempfs/bin/freeramdisk"
rm -rf "tempfs/bin/fdflush"
rm -rf "tempfs/bin/powertop"
rm -rf "tempfs/bin/nanddump"
rm -rf "tempfs/bin/mdev"
rm -rf "tempfs/bin/popmaildir"
rm -rf "tempfs/bin/fgconsole"
rm -rf "tempfs/bin/setfattr"
rm -rf "tempfs/bin/reset"
rm -rf "tempfs/bin/iplink"
rm -rf "tempfs/bin/cal"
rm -rf "tempfs/bin/udhcpd"
rm -rf "tempfs/bin/hush"
rm -rf "tempfs/bin/mkfs.ext2"
rm -rf "tempfs/bin/tc"
rm -rf "tempfs/bin/pwdx"
rm -rf "tempfs/bin/dd"
rm -rf "tempfs/bin/inetd"
rm -rf "tempfs/bin/fallocate"
rm -rf "tempfs/bin/awk"
rm -rf "tempfs/bin/smemcap"
rm -rf "tempfs/bin/who"
rm -rf "tempfs/bin/install"
rm -rf "tempfs/bin/xzcat"
rm -rf "tempfs/bin/nohup"
rm -rf "tempfs/bin/hdparm"
rm -rf "tempfs/bin/ed"
rm -rf "tempfs/bin/ftpd"
rm -rf "tempfs/bin/udpsvd"
rm -rf "tempfs/bin/chattr"
rm -rf "tempfs/bin/loadfont"
rm -rf "tempfs/bin/fatattr"
rm -rf "tempfs/bin/lsmod"
rm -rf "tempfs/bin/mesg"
rm -rf "tempfs/bin/partprobe"
rm -rf "tempfs/bin/nice"
rm -rf "tempfs/bin/echo"
rm -rf "tempfs/bin/find"
rm -rf "tempfs/bin/nologin"
rm -rf "tempfs/bin/ar"
rm -rf "tempfs/bin/rmmod"
rm -rf "tempfs/bin/lspci"
rm -rf "tempfs/bin/flock"
rm -rf "tempfs/bin/grep"
rm -rf "tempfs/bin/losetup"
rm -rf "tempfs/bin/mke2fs"
rm -rf "tempfs/bin/xargs"
rm -rf "tempfs/bin/eject"
rm -rf "tempfs/bin/fstrim"
rm -rf "tempfs/bin/findfs"
rm -rf "tempfs/bin/vi"
rm -rf "tempfs/bin/delgroup"
rm -rf "tempfs/bin/dpkg-deb"
rm -rf "tempfs/bin/lsscsi"
rm -rf "tempfs/bin/conspy"
rm -rf "tempfs/bin/chpst"
rm -rf "tempfs/bin/pmap"
rm -rf "tempfs/bin/telnet"
rm -rf "tempfs/bin/adjtimex"
rm -rf "tempfs/bin/nsenter"
rm -rf "tempfs/bin/ipaddr"
rm -rf "tempfs/bin/zcat"
rm -rf "tempfs/bin/pipe_progress"
rm -rf "tempfs/bin/lsattr"
rm -rf "tempfs/bin/vlock"
rm -rf "tempfs/bin/tac"
rm -rf "tempfs/bin/ssl_client"
rm -rf "tempfs/bin/getconf"
rm -rf "tempfs/bin/unshare"
rm -rf "tempfs/bin/run-parts"
rm -rf "tempfs/bin/route"
rm -rf "tempfs/bin/traceroute6"
rm -rf "tempfs/bin/httpd"
rm -rf "tempfs/bin/rx"
rm -rf "tempfs/bin/ipneigh"
rm -rf "tempfs/bin/cat"
rm -rf "tempfs/bin/unlink"
rm -rf "tempfs/bin/tftp"
rm -rf "tempfs/bin/groups"
rm -rf "tempfs/bin/wget"
rm -rf "tempfs/bin/logread"
rm -rf "tempfs/bin/pstree"
rm -rf "tempfs/bin/mktemp"
rm -rf "tempfs/bin/xz"
rm -rf "tempfs/bin/which"
rm -rf "tempfs/bin/softlimit"
rm -rf "tempfs/bin/getopt"
rm -rf "tempfs/bin/bzip2"
rm -rf "tempfs/bin/swapon"
rm -rf "tempfs/bin/renice"
rm -rf "tempfs/bin/ubirmvol"
rm -rf "tempfs/bin/setpriv"
rm -rf "tempfs/bin/passwd"
rm -rf "tempfs/bin/head"
rm -rf "tempfs/bin/strings"
rm -rf "tempfs/bin/ipcalc"
rm -rf "tempfs/bin/traceroute"
rm -rf "tempfs/bin/brctl"
rm -rf "tempfs/bin/pivot_root"
rm -rf "tempfs/bin/more"
rm -rf "tempfs/bin/lpr"
rm -rf "tempfs/bin/deallocvt"
rm -rf "tempfs/bin/hexedit"
rm -rf "tempfs/bin/fsck.minix"
rm -rf "tempfs/bin/mkfs.minix"
rm -rf "tempfs/bin/i2cget"
rm -rf "tempfs/bin/ether-wake"
rm -rf "tempfs/bin/showkey"
rm -rf "tempfs/bin/expand"
rm -rf "tempfs/bin/unlzma"
rm -rf "tempfs/bin/ubirename"
rm -rf "tempfs/bin/ln"
rm -rf "tempfs/bin/bootchartd"
rm -rf "tempfs/bin/cryptpw"
rm -rf "tempfs/bin/od"
rm -rf "tempfs/bin/cpio"
rm -rf "tempfs/bin/i2cdump"
rm -rf "tempfs/bin/udhcpc"
rm -rf "tempfs/bin/rev"
rm -rf "tempfs/bin/sha1sum"
rm -rf "tempfs/bin/telnetd"
rm -rf "tempfs/bin/tr"
rm -rf "tempfs/bin/rdev"
rm -rf "tempfs/bin/hexdump"
rm -rf "tempfs/bin/start-stop-daemon"
rm -rf "tempfs/bin/time"
rm -rf "tempfs/bin/id"
rm -rf "tempfs/bin/tty"
rm -rf "tempfs/bin/bbconfig"
rm -rf "tempfs/bin/dirname"
rm -rf "tempfs/bin/dnsdomainname"
rm -rf "tempfs/bin/cp"
rm -rf "tempfs/bin/uevent"
rm -rf "tempfs/bin/sha3sum"
rm -rf "tempfs/bin/modinfo"
rm -rf "tempfs/bin/rtcwake"
rm -rf "tempfs/bin/volname"
rm -rf "tempfs/bin/svok"
rm -rf "tempfs/bin/sv"
rm -rf "tempfs/bin/nmeter"
rm -rf "tempfs/bin/chgrp"
rm -rf "tempfs/bin/arp"
rm -rf "tempfs/bin/realpath"
rm -rf "tempfs/bin/poweroff"
rm -rf "tempfs/bin/sleep"
rm -rf "tempfs/bin/loadkmap"
rm -rf "tempfs/bin/pwd"
rm -rf "tempfs/bin/ubimkvol"
rm -rf "tempfs/bin/resize"
rm -rf "tempfs/bin/sysctl"
rm -rf "tempfs/bin/setkeycodes"
rm -rf "tempfs/bin/iptunnel"
rm -rf "tempfs/bin/mkfs.vfat"
rm -rf "tempfs/bin/yes"
rm -rf "tempfs/bin/chvt"
rm -rf "tempfs/bin/env"
rm -rf "tempfs/bin/script"
rm -rf "tempfs/bin/nameif"
rm -rf "tempfs/bin/seq"
rm -rf "tempfs/bin/svlogd"
rm -rf "tempfs/bin/fgrep"
rm -rf "tempfs/bin/pkill"
rm -rf "tempfs/bin/stat"
rm -rf "tempfs/bin/linux64"
rm -rf "tempfs/bin/makemime"
rm -rf "tempfs/bin/bzcat"
rm -rf "tempfs/bin/dumpkmap"
rm -rf "tempfs/bin/less"
rm -rf "tempfs/bin/usleep"
rm -rf "tempfs/bin/reboot"
rm -rf "tempfs/bin/tar"
rm -rf "tempfs/bin/iproute"
rm -rf "tempfs/bin/lsof"
rm -rf "tempfs/bin/setserial"
rm -rf "tempfs/bin/tail"
rm -rf "tempfs/bin/swapoff"
rm -rf "tempfs/bin/rdate"
rm -rf "tempfs/bin/mkdosfs"
rm -rf "tempfs/bin/setsid"
rm -rf "tempfs/bin/bunzip2"
rm -rf "tempfs/bin/runsv"
rm -rf "tempfs/bin/su"
rm -rf "tempfs/bin/md5sum"
rm -rf "tempfs/bin/nproc"
rm -rf "tempfs/bin/mt"
rm -rf "tempfs/bin/bc"
rm -rf "tempfs/bin/readlink"
rm -rf "tempfs/bin/chpasswd"
rm -rf "tempfs/bin/basename"
rm -rf "tempfs/bin/setconsole"
rm -rf "tempfs/bin/openvt"
rm -rf "tempfs/bin/sort"
rm -rf "tempfs/bin/lzcat"
rm -rf "tempfs/bin/lpq"
rm -rf "tempfs/bin/add-shell"
rm -rf "tempfs/bin/lsusb"
rm -rf "tempfs/bin/reformime"
rm -rf "tempfs/bin/beep"
rm -rf "tempfs/bin/setfont"
rm -rf "tempfs/bin/date"
rm -rf "tempfs/bin/uudecode"
rm -rf "tempfs/bin/fsync"
rm -rf "tempfs/bin/dnsd"
rm -rf "tempfs/bin/uuencode"
rm -rf "tempfs/bin/tcpsvd"
rm -rf "tempfs/bin/crontab"
rm -rf "tempfs/bin/runsvdir"
rm -rf "tempfs/bin/link"
rm -rf "tempfs/bin/egrep"
rm -rf "tempfs/bin/mount"
rm -rf "tempfs/bin/clear"
rm -rf "tempfs/bin/gzip"
rm -rf "tempfs/bin/iostat"
rm -rf "tempfs/bin/makedevs"
rm -rf "tempfs/bin/svc"
rm -rf "tempfs/bin/ftpget"
rm -rf "tempfs/bin/setuidgid"
rm -rf "tempfs/bin/gunzip"
rm -rf "tempfs/bin/lpd"
rm -rf "tempfs/bin/unexpand"
rm -rf "tempfs/bin/fuser"
rm -rf "tempfs/bin/ifup"
rm -rf "tempfs/bin/free"
rm -rf "tempfs/bin/sha512sum"
rm -rf "tempfs/bin/nuke"
rm -rf "tempfs/bin/crond"
rm -rf "tempfs/bin/comm"
rm -rf "tempfs/bin/mkpasswd"
rm -rf "tempfs/bin/ping"
rm -rf "tempfs/bin/linuxrc"
rm -rf "tempfs/bin/envuidgid"
rm -rf "tempfs/var"
rm -rf "tempfs/etc"
rm -rf "tempfs/mnt"
rm -rf "tempfs/sbin"

cd tempfs && tar -cf - * | xz -9 -c - > ../static-runtime.tar.xz
